#!/bin/sh


##############################################################################
# Simple script to configure, compile (and if you're 'root', install) SPLAT! #
# and associated utilities.  Written by John A. Magliacane, KD2BD May 2002   #
#                        Last update: September 2009                         #
##############################################################################

ECHO="/bin/echo"

ans=""
whoami=`whoami`

until [ "$ans" = "2" ] || [ "$ans" = "3" ] || [ "$ans" = "4" ] || [ "$ans" = "5" ] || [ "$ans" = "6" ] || [ "$ans" = "7" ] || [ "$ans" = "8" ]; do

	clear
	$ECHO
	$ECHO -e "\t  ******************************************************"
	$ECHO -e "\t  **   SPLAT! Standard Resolution Mode Configuration  **"
	$ECHO -e "\t  ******************************************************\n"
	$ECHO -e "\t   Please select the Maximum Analysis Region capability"
	$ECHO -e "\t   you would like SPLAT! to possess when operating in"
	$ECHO -e "\t   3 arc-second (standard) resolution mode based on"
	$ECHO -e "\t   the amount of free memory available for SPLAT!:\n"
	$ECHO -e "\t   Maximum Analysis Region       RAM + Swap Requirement"
	$ECHO -e "\t   ====================================================\n"
	$ECHO -e "\t   (2)  2 x 2 Degrees  ---------   25 Megabytes minimum"
	$ECHO -e "\t   (3)  3 x 3 Degrees  ---------   52 Megabytes minimum"
	$ECHO -e "\t   (4)  4 x 4 Degrees  ---------   95 Megabytes minimum"
	$ECHO -e "\t   (5)  5 x 5 Degrees  ---------  145 Megabytes minimum"
	$ECHO -e "\t   (6)  6 x 6 Degrees  ---------  210 Megabytes minimum"
	$ECHO -e "\t   (7)  7 x 7 Degrees  ---------  285 Megabytes minimum"
	$ECHO -e "\t   (8)  8 x 8 Degrees  ---------  370 Megabytes minimum\n"
	$ECHO -n "Your choice: "
	read ans
done

std_maxpages=`expr $ans \* $ans`

ans=""

until [ "$ans" = "1" ] || [ "$ans" = "2" ] || [ "$ans" = "3" ] || [ "$ans" = "4" ] || [ "$ans" = "5" ] || [ "$ans" = "6" ] || [ "$ans" = "7" ] || [ "$ans" = "8" ]; do

	clear
	$ECHO
	$ECHO -e "\t  ******************************************************"
	$ECHO -e "\t  **   SPLAT! HD High Resolution Mode Configuration   **"
	$ECHO -e "\t  ******************************************************\n"
	$ECHO -e "\t   Please select the Maximum Analysis Region capability"
	$ECHO -e "\t   you would like SPLAT! to possess when operating in"
	$ECHO -e "\t   1 arc-second (HD) resolution mode based on the amount"
	$ECHO -e "\t   of free memory available for SPLAT!  Selections 6, 7,"
	$ECHO -e "\t   and 8 are suitable for 64-BIT SYSTEMS ONLY:\n"
	$ECHO -e "\t   Maximum Analysis Region       RAM + Swap Requirement"
	$ECHO -e "\t   ====================================================\n"
	$ECHO -e "\t   (1)  1 x 1 Degrees  ---------   52 Megabytes minimum"
	$ECHO -e "\t   (2)  2 x 2 Degrees  ---------  225 Megabytes minimum"
	$ECHO -e "\t   (3)  3 x 3 Degrees  ---------  468 Megabytes minimum"
	$ECHO -e "\t   (4)  4 x 4 Degrees  ---------  855 Megabytes minimum"
	$ECHO -e "\t   (5)  5 x 5 Degrees  --------- 1305 Megabytes minimum"
	$ECHO -e "\t   (6)  6 x 6 Degrees  --------- 1890 Megabytes minimum"
	$ECHO -e "\t   (7)  7 x 7 Degrees  --------- 2565 Megabytes minimum"
	$ECHO -e "\t   (8)  8 x 8 Degrees  --------- 3330 Megabytes minimum"
	$ECHO -n "Your choice: "
	read ans
done

hd_maxpages=`expr $ans \* $ans`

# Build splat.h file

$ECHO "/*" > splat.h
$ECHO -e "  Generated by $0 by "$whoami" on "`date`"\n" >> splat.h

$ECHO "*/" >> splat.h

$ECHO "#ifdef HD_MODE" >> splat.h
$ECHO "  /* Parameters for 1 arc-second high resolution mode of operation */" >> splat.h
$ECHO "#define MAXPAGES $hd_maxpages"  >> splat.h
$ECHO "#else" >> splat.h
$ECHO "  /* Parameters for 3 arc-second high resolution mode of operation */" >> splat.h
$ECHO "#define MAXPAGES $std_maxpages"  >> splat.h
$ECHO "#endif" >> splat.h

$ECHO "To build SPLAT and SPLAT-HD just do 'make all'"
$ECHO
$ECHO "Don't forget to read the documentation under the docs directory"
$ECHO "as well as the various README files in the splat and splat/utils"
$ECHO -e "directories.  Enjoy the program!  John, KD2BD\n\n"

